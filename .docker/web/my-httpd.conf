<VirtualHost *:80>
    DocumentRoot /var/www/html/Service
    DirectoryIndex index.php index.html
    # 1. 로드밸런서 클러스터 정의
    # 도커 내부 DNS가 'was'라는 이름을 사용하는 모든 컨테이너 IP를 찾아줍니다.
    <Proxy "balancer://mycluster">
        BalancerMember "fcgi://was:9000"
    </Proxy>
    # 2. PHP 요청을 클러스터로 전달하도록 수정
    # 기존 'fcgi://was:9000' 대신 'balancer://mycluster'를 사용합니다.
    ProxyPassMatch ^/(.*\.php(/.*)?)$ balancer://mycluster/var/www/html/Service/$1
    ProxyPassMatch ^/$ balancer://mycluster/var/www/html/Service/index.php
    <Directory /var/www/html/Service>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
    ErrorLog /usr/local/apache2/logs/error.log
    CustomLog /usr/local/apache2/logs/access.log combined
</VirtualHost>